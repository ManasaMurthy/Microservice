#!groovy

node {
    try{
        sh ('echo env.REPO_URL')
        sh ('git remote set-url origin ${env.REPO_URL}')
         sh ('git pull origin env.BRANCH_NAME')
         sh ('cat README.md')
        if(env.PROJECT_TYPE == 'micro'){
            echo "micro"
        } else {
           echo "spark"   
        }
    }catch(Exception e){
        
    }

}
stage 'Unit Testing'
node {
    try{
         echo 'test'
    }catch(Exception e){
        
    }
   
}

stage 'Static Code Analysis - Sonar'
node {
    try{
        
    }catch(Exception e){
       
    }
   
}
stage 'Deployment'
node {
    try{
        echo env.IS_CD
        if(env.IS_CD=="true"){
         echo 'cd'   
        }else {
          echo 'just ci' 
        }
        
    }catch(Exception e){
        
    }
}
