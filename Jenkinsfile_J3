#!groovy

stage 'Build'
node {
	try{
     def exist = fileExists env.REPO_NAME
     if(exist){
         dir(env.REPO_NAME){
            deleteDir()
        }
     }
     println "Executing CI on " + env.REPO_URL + " on branch " + env.BRANCH_NAME
     sh ("git clone '${env.REPO_URL}' -b '${env.BRANCH_NAME}'")
     dir(env.REPO_NAME){
         if(env.PROJECT_TYPE == 'micro'){
                echo "micro"
          } else {
                echo "spark"   
          }
     }
	 }catch(Exception e){
		echo "Exception"
	 }
}
stage 'Unit Testing'
node {
	try {
    dir(env.REPO_NAME){
    
    }
	}catch(Exception e){
		echo "Exception"
	}
}

stage 'Sonar analysis'
node {
    try{
	
	}catch(Exception e){
		echo "Exception"
	}
}
stage 'Deployment'
node{
	echo env.IS_CD
	if(env.IS_CD == 'true'){
		echo "Deployment"
	}

}
